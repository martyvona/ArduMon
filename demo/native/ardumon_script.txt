# ardumon_client text script
#
# blank lines as well as comment lines starting with # are ignored
# lines may end with any combination of newline and carriage reuturn (other trailing whitespace is not ignored)
#
# lines not starting with > are sent as newline terminated commands
# up to one leading space on command lines will be stripped
# to send a command starting with > or ? prefix it with at least one space
# (the receiving ArduMon command interpreter should ignore any additional leading whitespace)
#
# lines starting with > are expected response lines (expected to be terminated with carriage return / newline pairs)
#
# lines starting with * are similar to > but don't check the response value, just that there was one line of response
#
# lines starting with @ are similar to * but echo the response line to the stdout of ardumon_client
#
# lines starting ?[ms] wait for the specified amount of time (default 100ms) and then discard any received input
# the default wait time can be overriden with ardumon_client --auto_wait
# the --auto_wait option also causes a ? line to be inferred after each command line with no subsequent > or ? line
#
# ardumon_client will parse this entire script and store it in memory at program start before issuing the first command
# so it is not currently possible to use ardumon_client with extremely long scripts that wouldn't fit in memory
# or with piped input that does not terminate with an EOF in finite time
#
# ardumon_client will abort with nonzero exit code when the received response does not match a specified > line
# or when --recv_timeout is enabled and a specified >, *, or @ line is not received in the allowed time

# disable echo and prompt
quiet t
*

sfp 3.875
gfp
?200

sfp 4.875
gfp
>4.875

sfp 5.875
gfp
@

# first leading space will be stripped by ardumon_client, second one should be ignored by ArduMon command interpreter
# the line-ending #comment will be sent but also should be ignored by the ArduMon command interpreter
  es "foo bar" #comment
>"foo bar"

# leading space escapes the > (though ">x" is not actually a valid command, so expect "bad command")
 >x
>bad command

em i32u08 392
>392
>receive underflow

quit
?
